<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ratchet & Clank Rift Apart - Platinum Trophy Roadmap</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-primary: #0a0a0a;
            --bg-secondary: #1a1a1a;
            --bg-tertiary: #2a2a2a;
            --text-primary: #ffffff;
            --text-secondary: #b0b0b0;
            --accent: #7c3aed;
            --accent-hover: #6d28d9;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --border: #333333;
            --card-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
        }

        [data-theme="light"] {
            --bg-primary: #f8f9fa;
            --bg-secondary: #ffffff;
            --bg-tertiary: #e9ecef;
            --text-primary: #212529;
            --text-secondary: #6c757d;
            --border: #dee2e6;
            --card-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, var(--bg-primary) 0%, #1a0f1f 100%);
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
            transition: background 0.3s ease;
        }

        [data-theme="light"] body {
            background: linear-gradient(135deg, var(--bg-primary) 0%, #e3f2fd 100%);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            text-align: center;
            margin-bottom: 40px;
            padding: 30px 0;
            background: var(--bg-secondary);
            border-radius: 15px;
            box-shadow: var(--card-shadow);
            border: 1px solid var(--border);
        }

        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            background: linear-gradient(45deg, var(--accent), #ec4899);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 700;
        }

        .subtitle {
            color: var(--text-secondary);
            font-size: 1.1rem;
        }

        .progress-bar {
            background: var(--bg-tertiary);
            border-radius: 25px;
            height: 30px;
            margin: 20px 0;
            overflow: hidden;
            position: relative;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .progress-fill {
            background: linear-gradient(90deg, var(--accent), #ec4899);
            height: 100%;
            border-radius: 25px;
            transition: width 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 0.9rem;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .stat-card {
            background: var(--bg-secondary);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            border: 1px solid var(--border);
            box-shadow: var(--card-shadow);
        }

        .stat-number {
            font-size: 2rem;
            font-weight: bold;
            color: var(--accent);
        }

        .stat-label {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .roadmap-overview {
            background: var(--bg-secondary);
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
            border: 1px solid var(--border);
        }

        .roadmap-overview h2 {
            color: var(--accent);
            margin-bottom: 15px;
        }

        .roadmap-steps {
            list-style: none;
            counter-reset: step-counter;
        }

        .roadmap-steps li {
            counter-increment: step-counter;
            margin-bottom: 15px;
            padding-left: 40px;
            position: relative;
        }

        .roadmap-steps li::before {
            content: counter(step-counter);
            position: absolute;
            left: 0;
            top: 0;
            background: var(--accent);
            color: white;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.9rem;
        }

        .planet-section {
            background: var(--bg-secondary);
            margin-bottom: 25px;
            border-radius: 15px;
            overflow: hidden;
            border: 1px solid var(--border);
        }

        .planet-header {
            background: linear-gradient(135deg, var(--accent), #6d28d9);
            padding: 20px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease;
            border: 1px solid var(--border);
        }

        .planet-header:hover {
            background: linear-gradient(135deg, var(--accent-hover), #5b21b6);
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(124, 58, 237, 0.3);
        }

        .planet-header h3 {
            font-size: 1.3rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .planet-toggle {
            font-size: 1.2rem;
            transition: transform 0.3s ease;
        }

        .planet-header.collapsed .planet-toggle {
            transform: rotate(-90deg);
        }

        .planet-content {
            padding: 25px;
            display: block;
        }

        .planet-content.hidden {
            display: none;
        }

        .checklist {
            list-style: none;
        }

        .checklist-item {
            background: var(--bg-tertiary);
            margin-bottom: 12px;
            border-radius: 8px;
            border: 1px solid var(--border);
            transition: all 0.3s ease;
            position: relative;
        }

        .checklist-item:hover {
            transform: translateX(5px);
            border-color: var(--accent);
            box-shadow: 0 4px 8px rgba(124, 58, 237, 0.2);
        }

        .checklist-item.completed {
            background: rgba(81, 207, 102, 0.1);
            border-color: var(--success);
        }

        .checklist-item.completed .item-text {
            text-decoration: line-through;
            color: var(--text-secondary);
        }

        .item-content {
            display: flex;
            align-items: center;
            padding: 15px;
            cursor: pointer;
        }

        .item-checkbox {
            width: 22px;
            height: 22px;
            border: 2px solid var(--accent);
            border-radius: 6px;
            margin-right: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            background: transparent;
        }

        .checklist-item.completed .item-checkbox {
            background: var(--success);
            border-color: var(--success);
            transform: scale(1.1);
        }

        .checklist-item.completed .item-checkbox::after {
            content: '‚úì';
            color: white;
            font-weight: bold;
            font-size: 14px;
        }

        .item-text {
            flex: 1;
            font-size: 1rem;
            font-weight: 500;
        }

        .item-type {
            background: var(--accent);
            color: white;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.7rem;
            font-weight: 600;
            margin-left: 10px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .item-type.story { background: var(--success); }
        .item-type.missable { background: var(--danger); }
        .item-type.collectible { background: var(--warning); }
        .item-type.weapon { background: #8b5cf6; }
        .item-type.misc { background: #06b6d4; }

        .item-explanation {
            padding: 0 15px 15px 52px;
            color: var(--text-secondary);
            font-size: 0.9rem;
            border-top: 1px solid var(--border);
            margin-top: 10px;
            display: none;
            background: rgba(255, 255, 255, 0.02);
            border-radius: 0 0 8px 8px;
        }

        .item-explanation.show {
            display: block;
        }

        .explanation-toggle {
            background: var(--accent);
            border: none;
            color: white;
            cursor: pointer;
            font-size: 16px;
            margin-left: 10px;
            padding: 0;
            border-radius: 15px;
            font-weight: 600;
            transition: all 0.3s ease;
            width: 24px;
            height: 24px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            line-height: 1;
        }

        .explanation-toggle:hover {
            background: var(--accent-hover);
            transform: translateY(-1px);
        }

        .controls {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
        }

        .menu-container {
            position: relative;
        }

        .menu-toggle {
            background: var(--accent);
            color: white;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 20px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(255, 107, 53, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .menu-toggle:hover {
            background: var(--accent-hover);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 107, 53, 0.4);
        }

        .menu-toggle.active {
            background: var(--accent-hover);
            transform: rotate(45deg);
        }

        .menu-dropdown {
            position: absolute;
            bottom: 60px;
            right: 0;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 12px;
            box-shadow: var(--card-shadow);
            display: none;
            min-width: 180px;
            overflow: hidden;
        }

        .menu-dropdown.show {
            display: block;
            animation: slideUp 0.3s ease;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .menu-item {
            background: none;
            border: none;
            color: var(--text-primary);
            padding: 12px 16px;
            width: 100%;
            text-align: left;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .menu-item:hover {
            background: var(--bg-tertiary);
        }

        .menu-item.danger {
            color: var(--danger);
        }

        .menu-item.danger:hover {
            background: rgba(255, 107, 107, 0.1);
        }

        .menu-item:first-child {
            border-radius: 12px 12px 0 0;
        }

        .menu-item:last-child {
            border-radius: 0 0 12px 12px;
        }

        .important-note {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid var(--danger);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 4px 8px rgba(239, 68, 68, 0.1);
        }

        .important-note h4 {
            color: var(--danger);
            margin-bottom: 10px;
            font-size: 1.1rem;
            font-weight: 600;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }

            h1 {
                font-size: 2rem;
            }

            .stats {
                grid-template-columns: repeat(2, 1fr);
            }

            .controls {
                bottom: 15px;
                right: 15px;
            }

            .menu-toggle {
                width: 45px;
                height: 45px;
                font-size: 18px;
            }

            .menu-dropdown {
                right: -10px;
                min-width: 160px;
            }
        }

        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üèÜ Ratchet & Clank Rift Apart</h1>
            <p class="subtitle">Platinum Trophy Roadmap & Checklist</p>
            <div class="progress-bar">
                <div class="progress-fill" id="progressBar">0%</div>
            </div>
            <div class="stats">
                <div class="stat-card">
                    <div class="stat-number" id="completedCount">0</div>
                    <div class="stat-label">Tasks Completed</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="totalCount">0</div>
                    <div class="stat-label">Total Tasks</div>
                </div>
            </div>
        </header>

        <div class="roadmap-overview">
            <h2>üìã Optimized Roadmap Overview</h2>
            <ul class="roadmap-steps">
                <li><strong>Step 1:</strong> Play through story on easy difficulty, kill all Grunthors on Sargasso (missable trophy)</li>
                <li><strong>Step 2:</strong> After story, free roam and collect all CraiggerBears, Spybots, and complete Glitch Challenges</li>
                <li><strong>Step 3:</strong> Collect 29/30 Blizon Crystals on Blizar Prime & Cordelion</li>
                <li><strong>Step 4:</strong> Buy all weapons from story, then start Challenge Mode for last 2 weapons</li>
            </ul>
            <div class="important-note">
                <h4>‚ö†Ô∏è CRITICAL MISSABLE TROPHY</h4>
                <p>Kill 5 Grunthors on Sargasso during the story! After the story they stop respawning. Farm the first one by jumping in swamp water to respawn it.</p>
            </div>
        </div>

        <main id="checklistContainer">
            <!-- Planets will be generated by JavaScript -->
        </main>

        <div class="controls">
            <div class="menu-container">
                <button class="menu-toggle" id="menuToggle" onclick="toggleMenu()">+</button>
                <div class="menu-dropdown" id="menuDropdown">
                    <button class="menu-item" onclick="expandAll()">
                        <span>üìñ</span> Expand All
                    </button>
                    <button class="menu-item" onclick="collapseAll()">
                        <span>üìï</span> Collapse All
                    </button>
                    <button class="menu-item danger" onclick="resetProgress()">
                        <span>üóëÔ∏è</span> Reset Progress
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        const checklistData = [
            {
                planet: "Planet 1: Corson V",
                items: [
                    { id: "corson_1", text: "Reach market area (story)", type: "story", explanation: "Automatic story progression after prologue" },
                    { id: "corson_2", text: "Gold Bolt #1 - Factory assembly line", type: "collectible", explanation: "Jump on moving box, wall-jump to balcony, then wall-jump up blue hexagon wall" },
                    { id: "corson_3", text: "Spybot #1 - Factory (forced)", type: "collectible", explanation: "Forced pickup in factory, cannot miss" },
                    { id: "corson_4", text: "CraiggerBear #1 - Market stall", type: "collectible", explanation: "On counter of market stall with purple tarp, before Club Nefarious" },
                    { id: "corson_5", text: "Armor #1 - Pocket Dimension", type: "collectible", explanation: "Enter purple portal in east market area" },
                    { id: "corson_6", text: "Gold Bolt #2 - Grapple to yellow rift", type: "collectible", explanation: "During 'Follow the Phantom' objective" },
                    { id: "corson_7", text: "Gold Bolt #3 - Backtrack with Omniglove", type: "collectible", explanation: "After getting Omniglove, backtrack to start and run across wall panel" },
                    { id: "corson_8", text: "Glitch Challenge #1 - Story forced", type: "story", explanation: "Automatic story progression" },
                    { id: "corson_9", text: "Enter Pocket Dimension", type: "misc", explanation: "Purple portals marked on map, many available" },
                    { id: "corson_10", text: "Bounce on parade balloons", type: "misc", explanation: "Clank & Qwark balloons in northeast Pocket Dimension" }
                ]
            },
            {
                planet: "Planet 2: Sargasso (CRITICAL - MISSABLE TROPHY)",
                items: [
                    { id: "sargasso_1", text: "KILL 5 GRUNTHORS (MISSABLE!)", type: "missable", explanation: "Big dinosaurs. Farm first one: kill, jump in swamp water to respawn, repeat 5x" },
                    { id: "sargasso_2", text: "Defeat Seekerpede boss", type: "story", explanation: "Automatic story progression" },
                    { id: "sargasso_3", text: "Gold Bolt #4 - North edge grapple", type: "collectible", explanation: "Grapple to yellow rift on hill in very north" },
                    { id: "sargasso_4", text: "Gold Bolt #5 - Behind green silo", type: "collectible", explanation: "After repairing bridge and fighting Grunthor" },
                    { id: "sargasso_5", text: "Armor #2 - Pocket Dimension", type: "collectible", explanation: "During first Speetle tutorial, on island straight ahead" },
                    { id: "sargasso_6", text: "Armor #3 - Pocket Dimension cave", type: "collectible", explanation: "Before going up right side of Rivet's Hideout cave" },
                    { id: "sargasso_7", text: "CraiggerBear #2 - Rivet's Hideout", type: "collectible", explanation: "On couch by TV, backtrack after defeating Seekerpede" },
                    { id: "sargasso_8", text: "Armor #4 - Southwest Pocket Dimension", type: "collectible", explanation: "After boss, ride Speetle to southwest corner island" },
                    { id: "sargasso_9", text: "Turn on TV in Rivet's Hideout", type: "misc", explanation: "After defeating Seekerpede, backtrack to hideout and interact with TV" },
                    { id: "sargasso_10", text: "Start 'Help Trudi' side quest", type: "story", explanation: "Available after Planet 3, return to Sargasso" },
                    { id: "sargasso_11", text: "Collect 10 Zurpstones for Trudi", type: "collectible", explanation: "Side quest reward, purple flowers in quest area" },
                    { id: "sargasso_12", text: "Collect 30 Zurpstones for dragon mount", type: "collectible", explanation: "Unlocks flying mount for Gold Bolt #6" },
                    { id: "sargasso_13", text: "Gold Bolt #6 - Flying dragon ring", type: "collectible", explanation: "Use dragon mount to fly through ring in center of map" },
                    { id: "sargasso_14", text: "Collect all 60 Zurpstones", type: "collectible", explanation: "Ground ones first, then use dragon fire ability after 45 collected" },
                    { id: "sargasso_15", text: "Spybot #2 - Zurpstone reward", type: "collectible", explanation: "Reward for collecting all 60 Zurpstones" },
                    { id: "sargasso_16", text: "Armor #5 - Zurpstone quest reward", type: "collectible", explanation: "Reward for collecting 30 Zurpstones" }
                ]
            },
            {
                planet: "Planet 3: Scarstu Debris Field",
                items: [
                    { id: "scarstu_1", text: "Complete Battleplex Challenge", type: "story", explanation: "Automatic story progression" },
                    { id: "scarstu_2", text: "Play 3 songs on jukebox", type: "misc", explanation: "In bar corner, change song 3 times (triangle when close)" },
                    { id: "scarstu_3", text: "Gold Bolt #7 - Under central platform", type: "collectible", explanation: "Jump off platform and glide into floating bolt" },
                    { id: "scarstu_4", text: "Armor #6 - Pocket Dimension", type: "collectible", explanation: "Northeast corner of planet" },
                    { id: "scarstu_5", text: "CraiggerBear #3 - Gastropub Pocket Dimension", type: "collectible", explanation: "On box left of receptionist in mandatory story path" },
                    { id: "scarstu_6", text: "Armor #7 - First Battleplex Challenge", type: "collectible", explanation: "Automatic reward from first challenge" },
                    { id: "scarstu_7", text: "Gold Bolt #8 - Battleplex Bronze #4", type: "collectible", explanation: "Complete 'Bugtrax' challenge" },
                    { id: "scarstu_8", text: "Armor #8 - Battleplex Bronze #5", type: "collectible", explanation: "Complete 'A Grunthor Named Sue' challenge" },
                    { id: "scarstu_9", text: "Gold Bolt #9 - Battleplex Silver #3", type: "collectible", explanation: "Complete 'Pest Control' (available after Planets 4-7)" },
                    { id: "scarstu_10", text: "Armor #9 - Battleplex Silver #5", type: "collectible", explanation: "Complete 'Revenge of the Seekerpede'" },
                    { id: "scarstu_11", text: "Spybot #3 - Battleplex Gold #4", type: "collectible", explanation: "Complete 'Vroom Around' (available after story)" },
                    { id: "scarstu_12", text: "Spybot #4 - North platform (post-Torren IV)", type: "collectible", explanation: "Use Hurlshot from Planet 6 to reach northern platform" },
                    { id: "scarstu_13", text: "Armor #10 - Battleplex Gold #5", type: "collectible", explanation: "Complete 'Twice as Nice' challenge" },
                    { id: "scarstu_14", text: "Gold Cup Battleplex Challenge", type: "misc", explanation: "Available after completing all 9 planets" }
                ]
            },
            {
                planet: "Planet 4: Savali",
                items: [
                    { id: "savali_1", text: "Reach The Archives", type: "story", explanation: "Automatic story progression" },
                    { id: "savali_2", text: "Get Hoverboots", type: "story", explanation: "Automatic story progression" },
                    { id: "savali_3", text: "Find hot springs robots", type: "misc", explanation: "South of Ms. Zurkon vendor, robots in sun beds" },
                    { id: "savali_4", text: "Start 'Hunt for Lombax Lore' quest", type: "story", explanation: "Side quest in middle of Savali" },
                    { id: "savali_5", text: "Collect 3 Lorbs", type: "collectible", explanation: "Any 3 Lorbs, then return to quest giver" },
                    { id: "savali_6", text: "Collect 7 Lorbs", type: "collectible", explanation: "Return to quest giver for armor reward" },
                    { id: "savali_7", text: "Collect all 12 Lorbs", type: "collectible", explanation: "Return to quest giver for final armor reward" },
                    { id: "savali_8", text: "Lorb #1 - West energy sphere", type: "collectible", explanation: "Follow wire, run over 3 plates with Hoverboots" },
                    { id: "savali_9", text: "Lorb #2 - Far west edge", type: "collectible", explanation: "Protected by enemies" },
                    { id: "savali_10", text: "Lorb #3 - Northwest flying platform", type: "collectible", explanation: "Chase platform, grapple on, step on pressure plate" },
                    { id: "savali_11", text: "CraiggerBear #4 - Southern floating island", type: "collectible", explanation: "After first speedskating section, check left side" },
                    { id: "savali_12", text: "Glitch Challenge #2 - Story forced", type: "story", explanation: "Automatic story progression" },
                    { id: "savali_13", text: "Spybot #5 - Northeast cave", type: "collectible", explanation: "Cave with pirate ship, entrance south of icon" },
                    { id: "savali_14", text: "Armor #11-13 - Lorb quest rewards", type: "collectible", explanation: "3, 7, and 12 Lorb rewards from quest giver" },
                    { id: "savali_15", text: "Armor #14 - Flying platform", type: "collectible", explanation: "East of Ms. Zurkon, chase and grapple platform" },
                    { id: "savali_16", text: "Armor #15-16 - Pocket Dimensions", type: "collectible", explanation: "Two pocket dimensions in southeast" },
                    { id: "savali_17", text: "Gold Bolt #10 - West mountain teleport", type: "collectible", explanation: "Drive over 3 green plates quickly, opens portal" },
                    { id: "savali_18", text: "Gold Bolt #11 - Southeast corner", type: "collectible", explanation: "Chase flying platform, grapple on, step on plate" },
                    { id: "savali_19", text: "Gold Bolt #12 & Glitch #5 - Post-Ardolis", type: "collectible", explanation: "Underground in northwest after 'Access the Catacombs'" },
                    { id: "savali_20", text: "Trick jump on grind rail", type: "misc", explanation: "5 double jumps while grinding on long rail" },
                    { id: "savali_21", text: "Trick jump at max speed Hoverboots", type: "misc", explanation: "Hold R1, press L2 to max speed, then X twice" }
                ]
            },
            {
                planet: "Planet 5: Blizar Prime",
                items: [
                    { id: "blizar_1", text: "Acquire Phase Quartz", type: "story", explanation: "Automatic story progression" },
                    { id: "blizar_2", text: "Blizon Crystals #1-3 - Story forced", type: "story", explanation: "Automatic story progression" },
                    { id: "blizar_3", text: "CraiggerBear #5 - Room with 3rd blizon", type: "collectible", explanation: "Same room as third blizon, on metallic parts" },
                    { id: "blizar_4", text: "Gold Bolt #13 - Lava area left path", type: "collectible", explanation: "Take left path in lava area to the end" },
                    { id: "blizar_5", text: "Blizon Crystal #4 - Central platform", type: "collectible", explanation: "Left side of platform with miners and Ms. Zurkon" },
                    { id: "blizar_6", text: "Gold Bolt #14 - After Blizon #4", type: "collectible", explanation: "In other dimension, use magnetic boots" },
                    { id: "blizar_7", text: "Start 'Find the Missing Chef' quest", type: "story", explanation: "Side quest in northeast of planet" },
                    { id: "blizar_8", text: "Blizon Crystals #5-7 - Chef quest area", type: "collectible", explanation: "Northeast side quest path to Chef Tulio" },
                    { id: "blizar_9", text: "Gold Bolt #15 - After Blizon #7", type: "collectible", explanation: "Spawns in front of you after hitting crystal" },
                    { id: "blizar_10", text: "Spybot #6 - Chef quest reward", type: "collectible", explanation: "Defend honey machine, then get Spybot from Chef" },
                    { id: "blizar_11", text: "Collect Honey for Chef Tulio", type: "misc", explanation: "Complete Chef Tulio's side quest" },
                    { id: "blizar_12", text: "Armor #17 - Pocket Dimension", type: "collectible", explanation: "Northeast side quest path to Chef Tulio" },
                    { id: "blizar_13", text: "Blizon Crystals #8-9 - West platform", type: "collectible", explanation: "West of central platform, after flying platform" },
                    { id: "blizar_14", text: "Armor #18 - After Blizon #9", type: "collectible", explanation: "In front of you after hitting crystal" },
                    { id: "blizar_15", text: "Blizon Crystals #10-23 - Story/rail", type: "story", explanation: "Most are automatic, #20-21 are semi-missable on rails" },
                    { id: "blizar_16", text: "CRITICAL: Blizon #20-21 on rails", type: "missable", explanation: "During rail grind, 3 rails section - get BOTH left and right rail crystals" }
                ]
            },
            {
                planet: "Planet 6: Torren IV",
                items: [
                    { id: "torren_1", text: "Meet the Fixer", type: "story", explanation: "Automatic story progression" },
                    { id: "torren_2", text: "Get Hurlshot ability", type: "story", explanation: "Automatic story progression" },
                    { id: "torren_3", text: "Gold Bolt #16 - Right path start", type: "collectible", explanation: "Take right path at start, use Hoverboots over speedramp" },
                    { id: "torren_4", text: "Spybot #7 - After swing rope", type: "collectible", explanation: "Go down magnetic path on right before Ms. Zurkon" },
                    { id: "torren_5", text: "CraiggerBear #6 - Market stand", type: "collectible", explanation: "On counter of market stand with TVs, right before Ms. Zurkon" },
                    { id: "torren_6", text: "Gold Bolt #17 - Rail grind grapple", type: "collectible", explanation: "During long rail grind, grapple to yellow rift on left" },
                    { id: "torren_7", text: "Armor #19 - Pocket Dimension", type: "collectible", explanation: "After Hurlshot, on island with Ms. Zurkon, right side pocket dimension" }
                ]
            },
            {
                planet: "Planet 7: Cordelion",
                items: [
                    { id: "cordelion_1", text: "Set Juice Free", type: "story", explanation: "Automatic story progression" },
                    { id: "cordelion_2", text: "Blizon Crystal #24 - Story forced", type: "story", explanation: "Automatic after first Ms. Zurkon" },
                    { id: "cordelion_3", text: "CraiggerBear #7 - Snow area left", type: "collectible", explanation: "After first blizon, slide down 3 times, check immediate left" },
                    { id: "cordelion_4", text: "Blizon Crystal #25 - East platform", type: "collectible", explanation: "Jump to east platform with full speed Hoverboots" },
                    { id: "cordelion_5", text: "Gold Bolt #18 - After Blizon #25", type: "collectible", explanation: "In front of you after hitting crystal" },
                    { id: "cordelion_6", text: "Gold Bolt #19 - Underground tunnel", type: "collectible", explanation: "First room left, grapple to yellow rift behind half-open door" },
                    { id: "cordelion_7", text: "Spybot #8 - Above forge entrance", type: "collectible", explanation: "Use yellow rift to pull up above forge entrance" },
                    { id: "cordelion_8", text: "Blizon Crystals #26-30 - Story forced", type: "story", explanation: "Most are automatic story progression" },
                    { id: "cordelion_9", text: "Armor #20 - Pocket Dimension", type: "collectible", explanation: "After blowing up forge, pocket dimension in crystal room" },
                    { id: "cordelion_10", text: "Glitch Challenge #3 - Story forced", type: "story", explanation: "Automatic story progression" },
                    { id: "cordelion_11", text: "Gold Bolt #20 - Underwater section", type: "collectible", explanation: "Take right fork, use magnetic boots to jump up wall" }
                ]
            },
            {
                planet: "Planet 8: Ardolis",
                items: [
                    { id: "ardolis_1", text: "Feed Bubbles", type: "story", explanation: "Automatic story progression" },
                    { id: "ardolis_2", text: "Armor #21 - Pocket Dimension", type: "collectible", explanation: "After glitching room, take right path to beach, pocket dimension" },
                    { id: "ardolis_3", text: "Gold Bolt #21 & Glitch #4 - Pirate Trials", type: "collectible", explanation: "2nd room of trials, left side computer console" },
                    { id: "ardolis_4", text: "Armor #22 - Pirate trials reward", type: "collectible", explanation: "Automatic reward from completing pirate trials" },
                    { id: "ardolis_5", text: "CraiggerBear #8 - Last trial room", type: "collectible", explanation: "In same room as armor reward, by pirate chest" },
                    { id: "ardolis_6", text: "Spybot #9 - Northeast island", type: "collectible", explanation: "Complex path: teleporter ‚Üí rope swing ‚Üí pirate ship ‚Üí bridges ‚Üí island" },
                    { id: "ardolis_7", text: "Gold Bolt #22 - Next to Spybot", type: "collectible", explanation: "Use Speetle, take left path, jump ramp into bolt" }
                ]
            },
            {
                planet: "Planet 9: Viceron",
                items: [
                    { id: "viceron_1", text: "Break In and Out of Prison", type: "story", explanation: "Automatic story progression" },
                    { id: "viceron_2", text: "Retrieve Dimensional Map", type: "story", explanation: "Automatic story progression" },
                    { id: "viceron_3", text: "Defeat final bosses", type: "story", explanation: "Automatic story progression" },
                    { id: "viceron_4", text: "Gold Bolt #23 - Right path phantom dash", type: "collectible", explanation: "Follow path right from Ms. Zurkon, use phantom dash" },
                    { id: "viceron_5", text: "Spybot #10 - Ventilation shaft", type: "collectible", explanation: "After destroying fan, in vents before dropping out" },
                    { id: "viceron_6", text: "CraiggerBear #9 - Clank's room", type: "collectible", explanation: "After freeing Clank, right side of room on bench" },
                    { id: "viceron_7", text: "Gold Bolt #24 - Outside area northeast", type: "collectible", explanation: "After rescuing Clank, top right corner" },
                    { id: "viceron_8", text: "Armor #23 - Open prison cell", type: "collectible", explanation: "Room with Ratchet's cell, left side second floor" },
                    { id: "viceron_9", text: "Armor #24 - Pocket Dimension", type: "collectible", explanation: "Right of Ms. Zurkon's shop, path to Warden's Office" },
                    { id: "viceron_10", text: "Gold Bolt #25 - Final cell block", type: "collectible", explanation: "After Warden's office window, check left cells" }
                ]
            },
            {
                planet: "Post-Story: Challenge Mode & Cleanup",
                items: [
                    { id: "post_1", text: "Resume from Title Screen (free roam)", type: "story", explanation: "Choose Resume on completed save, puts you before final boss" },
                    { id: "post_2", text: "Complete any remaining CraiggerBears", type: "collectible", explanation: "All 9 needed for UnBEARably Awesome trophy" },
                    { id: "post_3", text: "Complete any remaining Spybots", type: "collectible", explanation: "All 10 needed for RYNO weapon" },
                    { id: "post_4", text: "Complete any remaining Glitch Challenges", type: "collectible", explanation: "All 5 needed, can skip puzzles" },
                    { id: "post_5", text: "Hit 29/30 Blizon Crystals", type: "collectible", explanation: "Only 29 needed for trophy, can miss 1" },
                    { id: "post_6", text: "Collect 5 Gold Bolts", type: "collectible", explanation: "Only 5 of 25 needed for trophy" },
                    { id: "post_7", text: "Get 1 head, 1 torso, 1 leg armor", type: "collectible", explanation: "Any armor pieces work, don't need same set" },
                    { id: "post_8", text: "Buy all story weapons (18 total)", type: "weapon", explanation: "From Ms. Zurkon vendors throughout the game" },
                    { id: "post_9", text: "Get weapon to Level 5", type: "weapon", explanation: "Use Blast Pistol, easy to level with lots of ammo" },
                    { id: "post_10", text: "Fully upgrade a weapon", type: "weapon", explanation: "31 Raritanium for Blast Pistol, must be Level 5 first" },
                    { id: "post_11", text: "Fill Weapon Wheel (8 weapons)", type: "weapon", explanation: "Automatic while buying all weapons" },
                    { id: "post_12", text: "Start Challenge Mode (New Game+)", type: "weapon", explanation: "New save slot from Title Screen" },
                    { id: "post_13", text: "Buy Bouncer & Pixelizer (Challenge Mode)", type: "weapon", explanation: "First Ms. Zurkon in prologue, 10 minutes in, cost 1 bolt each" },
                    { id: "post_14", text: "Get RYNO (all Spybots collected)", type: "weapon", explanation: "Free from Ms. Zurkon after finding all 10 Spybots" },
                    { id: "post_15", text: "Melee 5 frozen enemies", type: "misc", explanation: "Buy Cold Snap weapon, freeze then melee" },
                    { id: "post_16", text: "Kill 2 enemies with 1 Ricochet", type: "misc", explanation: "Buy Ricochet, hit toad groups from behind" },
                    { id: "post_17", text: "Kill 10 enemies with Void Reactor", type: "misc", explanation: "Level 5 Void Repulser, collect bullets, shoot back" },
                    { id: "post_18", text: "20 Headshots with Headhunter", type: "misc", explanation: "Buy Headhunter sniper rifle" },
                    { id: "post_19", text: "Deploy 50 Mr. Fungis", type: "misc", explanation: "Buy Mr. Fungi, use up 50 ammo" },
                    { id: "post_20", text: "Defeat 30 Topiary'd enemies", type: "misc", explanation: "Buy Topiary Sprinkler, kill green enemies" },
                    { id: "post_21", text: "Defeat 30 ejected Trooper heads", type: "misc", explanation: "Destroy Troopers, then their heads" }
                ]
            }
        ];

        let completedItems = new Set();
        let expandedPlanets = new Set();

        function initializeChecklist() {
            const container = document.getElementById('checklistContainer');
            container.innerHTML = '';

            checklistData.forEach((planet, planetIndex) => {
                const planetSection = document.createElement('div');
                planetSection.className = 'planet-section fade-in';
                planetSection.innerHTML = `
                    <div class="planet-header" onclick="togglePlanet(${planetIndex})">
                        <h3>${planet.planet}</h3>
                        <span class="planet-toggle">‚ñº</span>
                    </div>
                    <div class="planet-content" id="planet-${planetIndex}">
                        <ul class="checklist">
                            ${planet.items.map(item => `
                                <li class="checklist-item" id="item-${item.id}">
                                    <div class="item-content" onclick="toggleItem('${item.id}')">
                                        <div class="item-checkbox"></div>
                                        <span class="item-text">${item.text}</span>
                                        <span class="item-type ${item.type}">${getTypeLabel(item.type)}</span>
                                        <button class="explanation-toggle" onclick="toggleExplanation(event, '${item.id}')">i</button>
                                    </div>
                                    <div class="item-explanation" id="explanation-${item.id}">
                                        ${item.explanation}
                                    </div>
                                </li>
                            `).join('')}
                        </ul>
                    </div>
                `;
                container.appendChild(planetSection);
                expandedPlanets.add(planetIndex);
            });

            loadProgress();
            updateStats();
        }

        function getTypeLabel(type) {
            const labels = {
                story: 'Story',
                missable: 'Missable',
                collectible: 'Collectible',
                weapon: 'Weapon',
                misc: 'Misc'
            };
            return labels[type] || type;
        }

        function togglePlanet(planetIndex) {
            const content = document.getElementById(`planet-${planetIndex}`);
            const header = content.previousElementSibling;
            
            if (content.classList.contains('hidden')) {
                content.classList.remove('hidden');
                header.classList.remove('collapsed');
                expandedPlanets.add(planetIndex);
            } else {
                content.classList.add('hidden');
                header.classList.add('collapsed');
                expandedPlanets.delete(planetIndex);
            }
            
            saveProgress();
        }

        function toggleItem(itemId) {
            const item = document.getElementById(`item-${itemId}`);
            
            if (completedItems.has(itemId)) {
                completedItems.delete(itemId);
                item.classList.remove('completed');
            } else {
                completedItems.add(itemId);
                item.classList.add('completed');
            }
            
            saveProgress();
            updateStats();
        }

        function toggleExplanation(event, itemId) {
            event.stopPropagation();
            const explanation = document.getElementById(`explanation-${itemId}`);
            explanation.classList.toggle('show');
        }

        function updateStats() {
            const totalItems = checklistData.reduce((sum, planet) => sum + planet.items.length, 0);
            const completedCount = completedItems.size;
            const progressPercentage = Math.round((completedCount / totalItems) * 100);
            
            document.getElementById('progressBar').style.width = `${progressPercentage}%`;
            document.getElementById('progressBar').textContent = `${progressPercentage}%`;
            document.getElementById('completedCount').textContent = completedCount;
            document.getElementById('totalCount').textContent = totalItems;
        }

        function saveProgress() {
            const progress = {
                completedItems: Array.from(completedItems),
                expandedPlanets: Array.from(expandedPlanets)
            };
            localStorage.setItem('ratchetProgress', JSON.stringify(progress));
        }

        function loadProgress() {
            const saved = localStorage.getItem('ratchetProgress');
            if (saved) {
                const progress = JSON.parse(saved);
                completedItems = new Set(progress.completedItems || []);
                expandedPlanets = new Set(progress.expandedPlanets || []);
                
                // Apply completed state
                completedItems.forEach(itemId => {
                    const item = document.getElementById(`item-${itemId}`);
                    if (item) item.classList.add('completed');
                });
                
                // Apply expanded state
                checklistData.forEach((planet, index) => {
                    const content = document.getElementById(`planet-${index}`);
                    const header = content.previousElementSibling;
                    
                    if (!expandedPlanets.has(index)) {
                        content.classList.add('hidden');
                        header.classList.add('collapsed');
                    }
                });
            }
        }

        function expandAll() {
            checklistData.forEach((planet, index) => {
                const content = document.getElementById(`planet-${index}`);
                const header = content.previousElementSibling;
                content.classList.remove('hidden');
                header.classList.remove('collapsed');
                expandedPlanets.add(index);
            });
            saveProgress();
        }

        function collapseAll() {
            checklistData.forEach((planet, index) => {
                const content = document.getElementById(`planet-${index}`);
                const header = content.previousElementSibling;
                content.classList.add('hidden');
                header.classList.add('collapsed');
                expandedPlanets.delete(index);
            });
            saveProgress();
        }

        function toggleMenu() {
            const menuToggle = document.getElementById('menuToggle');
            const menuDropdown = document.getElementById('menuDropdown');
            
            menuToggle.classList.toggle('active');
            menuDropdown.classList.toggle('show');
        }

        function resetProgress() {
            if (confirm('Are you sure you want to reset all progress? This cannot be undone.')) {
                completedItems.clear();
                expandedPlanets.clear();
                localStorage.removeItem('ratchetProgress');
                
                document.querySelectorAll('.checklist-item').forEach(item => {
                    item.classList.remove('completed');
                });
                
                checklistData.forEach((planet, index) => {
                    const content = document.getElementById(`planet-${index}`);
                    const header = content.previousElementSibling;
                    content.classList.remove('hidden');
                    header.classList.remove('collapsed');
                    expandedPlanets.add(index);
                });
                
                updateStats();
                
                // Close menu after reset
                const menuToggle = document.getElementById('menuToggle');
                const menuDropdown = document.getElementById('menuDropdown');
                menuToggle.classList.remove('active');
                menuDropdown.classList.remove('show');
            }
        }

        // Close menu when clicking outside
        document.addEventListener('click', function(event) {
            const menuContainer = document.querySelector('.menu-container');
            if (!menuContainer.contains(event.target)) {
                const menuToggle = document.getElementById('menuToggle');
                const menuDropdown = document.getElementById('menuDropdown');
                menuToggle.classList.remove('active');
                menuDropdown.classList.remove('show');
            }
        });

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', initializeChecklist);
    </script>
</body>
</html>
